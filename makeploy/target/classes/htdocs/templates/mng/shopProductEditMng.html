<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>后台管理系统-商品审核-查看详情</title>
<link rel="stylesheet" href="css/app.v2.css" type="text/css" />
<script src="js/type.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery-1.11.3.js" type="text/javascript" charset="utf-8"></script>
<style type="text/css">
.panel-heading {
	font-weight: bold;
}
</style>
<script type="text/javascript">
	window.onload = function() {

		//init_area();
	}
</script>
<script type="text/javascript">
	function changeImg1() {
		$('.aaaa1').html('')
		var pic, file;
		pic = document.getElementById("preview1");
		file = document.getElementById("f1");

		var ext = file.value.substring(file.value.lastIndexOf(".") + 1)
				.toLowerCase();

		// gif在IE浏览器暂时无法显示
		if (ext != 'png' && ext != 'jpg' && ext != 'jpeg') {
			alert("图片的格式必须为png或者jpg或者jpeg格式！");
			return;
		}
		var isIE = navigator.userAgent.match(/MSIE/) != null, isIE6 = navigator.userAgent
				.match(/MSIE 6.0/) != null;

		if (isIE) {
			file.select();
			var reallocalpath = document.selection.createRange().text;

			// IE6浏览器设置img的src为本地路径可以直接显示图片
			if (isIE6) {
				pic.src = reallocalpath;
			} else {
				// 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现
				pic.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\""
						+ reallocalpath + "\")";
				// 设置img的src为base64编码的透明图片 取消显示浏览器默认图片
				pic.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
			}
		} else {
			html5Reader1(file);
		}
	}

	function html5Reader1(file) {
		var index = file.files.length
		$('#imgNumber1').val(index)
		for (var i = 0; i < file.files.length; i++) {
			var f = file.files[i];
			var reader = new FileReader();
			reader.readAsDataURL(f);
			reader.onload = function(e) {
				var teet = '<div> <img id="preview1" name="pic"style=" height: 200px; float: left; position: relative;margin: 1px 1px " src=' + this.result + '><div>'
				$('.aaaa1').append(teet)
			}

		}
	}

	function changeImg2() {
		$('.aaaa2').html('')
		var pic, file;
		pic = document.getElementById("preview2");
		file = document.getElementById("f2");

		var ext = file.value.substring(file.value.lastIndexOf(".") + 1)
				.toLowerCase();

		// gif在IE浏览器暂时无法显示
		if (ext != 'png' && ext != 'jpg' && ext != 'jpeg') {
			alert("图片的格式必须为png或者jpg或者jpeg格式！");
			return;
		}
		var isIE = navigator.userAgent.match(/MSIE/) != null, isIE6 = navigator.userAgent
				.match(/MSIE 6.0/) != null;

		if (isIE) {
			file.select();
			var reallocalpath = document.selection.createRange().text;

			// IE6浏览器设置img的src为本地路径可以直接显示图片
			if (isIE6) {
				pic.src = reallocalpath;
			} else {
				// 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现
				pic.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\""
						+ reallocalpath + "\")";
				// 设置img的src为base64编码的透明图片 取消显示浏览器默认图片
				pic.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
			}
		} else {
			html5Reader2(file);
		}
	}

	function html5Reader2(file) {
		var index = file.files.length
		$('#imgNumber2').val(index)
		for (var i = 0; i < file.files.length; i++) {
			var f = file.files[i];
			var reader = new FileReader();
			reader.readAsDataURL(f);
			reader.onload = function(e) {
				var teet = '<div> <img id="preview2" name="pic"style=" height: 200px; float: left; position: relative;margin: 1px 1px " src=' + this.result + '><div>'
				$('.aaaa2').append(teet)
			}

		}
	}

	function changeImg3() {
		$('.aaaa3').html('')
		var pic, file;
		pic = document.getElementById("preview3");
		file = document.getElementById("f3");

		var ext = file.value.substring(file.value.lastIndexOf(".") + 1)
				.toLowerCase();

		// gif在IE浏览器暂时无法显示
		if (ext != 'png' && ext != 'jpg' && ext != 'jpeg') {
			alert("图片的格式必须为png或者jpg或者jpeg格式！");
			return;
		}
		var isIE = navigator.userAgent.match(/MSIE/) != null, isIE6 = navigator.userAgent
				.match(/MSIE 6.0/) != null;

		if (isIE) {
			file.select();
			var reallocalpath = document.selection.createRange().text;

			// IE6浏览器设置img的src为本地路径可以直接显示图片
			if (isIE6) {
				pic.src = reallocalpath;
			} else {
				// 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现
				pic.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\""
						+ reallocalpath + "\")";
				// 设置img的src为base64编码的透明图片 取消显示浏览器默认图片
				pic.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
			}
		} else {
			html5Reader3(file);
		}
	}

	function html5Reader3(file) {
		var index = file.files.length
		$('#imgNumber3').val(index)
		for (var i = 0; i < file.files.length; i++) {
			var f = file.files[i];
			var reader = new FileReader();
			reader.readAsDataURL(f);
			reader.onload = function(e) {
				var teet = '<div> <img id="preview3" name="pic"style=" height: 200px; float: left; position: relative;margin: 1px 1px " src=' + this.result + '><div>'
				$('.aaaa3').append(teet)
			}

		}
	}
	function changeS_childType() {
		var fType = document.getElementById("s_fatherType").value
		var url = "getChildType.do"
		jQuery.ajax({
			type : "POST",
			url : url,
			data : {
				"fatherType" : fType
			},
			error : function(request) {
				alert("Connection error");
			},
			success : function(result) {
				var div = ''
				jQuery.each(result, function(i, item) {
					div += '<option value="'+item.childrenName+'">'
							+ item.childrenName + '</option>'

				})
				$("#s_childType").html(div)
			}
		});
	}
</script>
<script type="text/javascript">
	function fun() {
		var obj = document.getElementsByName("test");
		var check_val = [];
		for (k in obj) {
			if (obj[k].checked)
				check_val.push(obj[k].value);
		}
		/* alert(check_val); */
		if (check_val == '') {
			alert("运费模板为空，请选择正确运费模板!");
			return false;
		}
		$('#templateId').val(check_val);
	}
</script>
</head>
<body>
	<section class="panel panel-success portlet-item">


		<!--商品信息-->
		<header class="panel-heading">商品信息</header>
		<ul class="list-group alt">
			<li class="list-group-item">
				<div class="media-body">
					<div class="panel-body">
						<form role="form" action="ShopEditProduct.do" method="POST"
							enctype="multipart/form-data">
							<div class="form-group">
								<label class="col-sm-2 control-label">修改分类：</label>
								<div class="col-sm-3">
									<select id="s_fatherType" name="s_fatherType"
										class="form-control m-b">
										<option value="$!product.productType">$!product.productType</option>
										#foreach($type in $fathertype)
										<option value="$!type">$!type</option> #end
									</select>
								</div>
								<div class="col-sm-3">
									<select id="s_childType" name="s_childType"
										class="form-control m-b">
										<option value="$!product.children">$!product.children</option>

									</select>
								</div>

							</div>
							<div class="form-group" style="height: 50px;"></div>
							<div class="form-group">
								<label>商品名</label> <input name="productName"
									value="$!product.productName" type="text" class="form-control"
									placeholder="请输入商品名" />
							</div>
							<div class="form-group">
								<label>商品价格</label> <input name="Price"
									value="$!product.oldPrice" type="text" class="form-control"
									placeholder="请输入商品价格" />
							</div>
							#if($!checkPoint == '2')
							<div class="form-group">
								<label>商品积分</label> <input name="usePoint"
									value="$!product.usePoint" type="text" class="form-control"
									placeholder="请输入商品积分" />
							</div>
							#end
							#if($!checkPoint == '1')
							<div class="form-group" style="display: none;">
								<label>商品积分</label> <input name="usePoint"
									value="$!product.usePoint" type="text" class="form-control"
									placeholder="请输入商品积分" />
							</div>
							#end
							<div class="form-group">
								<label>单件商品重量（单位：kg）（如果商品是按重量计算运费，务必填写）</label> <input
									name="weight" value="$!product.productWeight" type="text"
									class="form-control" placeholder="请输入商品单件重量" />
							</div>
							<div class="form-group" id="post">
								<label>选择运费模板</label><br> 
								#if($!checksize.size() == 0) 
								<label>当前没有运费模板，请设置</label> 
								#else 
								#foreach($owntemp in $templateIdStr) 
								<input type="checkbox" name="test" value="$!owntemp.templateId" checked="checked"><label>$!owntemp.templateName</label>
								#end 
								#foreach($othertemp in $faretemplateList) 
								<input type="checkbox" name="test" value="$!othertemp.templateId"><label>$!othertemp.templateName</label>
								#end 
								#end
							</div>
							<br>

							<div style="clear: both;"
								class="line line-dashed line-lg pull-in"></div>
							<table>
								#if($sizeFlag==1) #foreach($size in $sizeList)
								<tr>
									<td><label>$!size.fatherName</label></td>
									<td><label>$!size.childrenName</label></td>

									<td><label style="margin-left: 40px"><span>库存:</span></label>
										<input name="$!size.parflag" value="$!size.stock" class=" "
										type="text" id="" style="margin-left: 30px;"
										placeholder="输入该样式库存"></td> #end #elseif($sizeFlag==2)
									#foreach($size in $sizeList)
								<tr>
									<td><label>$!size.shopId</label></td>
									<td><label>$!size.fatherName</label></td>
									<td><div style="width: 30px;"></div></td>
									<td><label>$!size.productNo</label></td>
									<td><label>$!size.childrenName</label></td>

									<td><label style="margin-left: 40px"><span>库存:</span></label>
										<input name="$!size.parflag" value="$!size.stock" class=" "
										type="text" id="" style="margin-left: 30px;"
										placeholder="输入该样式库存"></td> #end #elseif($sizeFlag==0)
								<tr>
									<td><label style="margin-left: 40px"><span>总库存:</span></label>
										<input name="stock" value="$!product.stock" class=" "
										type="text" id="" style="margin-left: 30px;"
										placeholder="输入该样式库存"></td> #end
								</tr>

								<input type="text" style="display: none;" value="$!number"
									name="sizeNumber">
								<input type="text" style="display: none;" value="$!sizeFlag"
									name="sizeFlag">
								<input type="text" style="display: none;"
									value="$!product.productNo" name="productNo">
								<input id="templateId" name="templateId" value=''
									style="display: none" />


							</table>
							<table>
								<div class="line line-dashed line-lg pull-in"></div>
								<div>
									<label class="col-sm-2 control-label">原图：</label><br>
									#foreach($images in $proImageList) 
									#if($!images.flag == '0')
									<p>(详情图)</p>
									#elseif($!images.flag == '1')
									<p>(主图)</p>
									#elseif($!images.flag == '2')
									<p>(banner)</p>
									#end <img src="$!images.img" style="height: 50px;"> 
									#end
								</div>
								<br>
								<br>
								<br>
								<div class="line line-dashed line-lg pull-in"></div>
								<div class="form-group">
									<label class="col-sm-2 control-label">上传首页展示商品图片：</label>
									<p>(选择一张首页展示图片)</p>
									<div class="col-sm-3">
										<input type="file" name="image1" class="filestyle"
											data-icon="false" id="f1" data-classButton="btn btn-default"
											data-classInput="form-control inline input-s"
											onchange="changeImg1()" /> <input id="number" name="number"
											value='' style="display: none" /> <input id="flag"
											name="flag" value='' style="display: none" /> <input
											id="imgNumber1" name="imgNumber1" value=''
											style="display: none" />
									</div>
									<!-- 预览 -->
									<div class="col-sm-10">
										<label class="col-sm-2 control-label"
											style="margin-top: 20px;">预览</label>
										<div class="row aaaa1" style="position: relative; left: 0px;">

										</div>
										<div style="height: 200px"></div>
									</div>
								</div>

								<div class="form-group" style="clear: both;">
									<label class="col-sm-2 control-label">上传banner商品图片：</label>
									<p>(按住Ctrl选择多张)</p>
									<div class="col-sm-3">
										<input type="file" name="image2" class="filestyle"
											data-icon="false" id="f2" data-classButton="btn btn-default"
											data-classInput="form-control inline input-s"
											onchange="changeImg2()" multiple="multiple" /> <input
											id="number2" name="number2" value='' style="display: none" />
										<input id="imgNumber2" name="imgNumber2" value=''
											style="display: none" />
									</div>
									<!-- 预览 -->
									<div class="col-sm-10">
										<label class="col-sm-2 control-label"
											style="margin-top: 20px;">预览</label>
										<div class="row aaaa2" style="position: relative; left: 0px;">

										</div>
										<div style="height: 200px"></div>
									</div>
								</div>

								<div class="form-group" style="clear: both;">
									<label class="col-sm-2 control-label">上传非首页展示商品图片：</label>
									<p>(按住Ctrl选择多张)</p>
									<div class="col-sm-3">
										<input type="file" name="image3" class="filestyle"
											data-icon="false" id="f3" data-classButton="btn btn-default"
											data-classInput="form-control inline input-s"
											onchange="changeImg3()" multiple="multiple" /> <input
											id="number3" name="number3" value='' style="display: none" />
										<input id="imgNumber3" name="imgNumber3" value=''
											style="display: none" />
									</div>
									<!-- 预览 -->
									<div class="col-sm-10">
										<label class="col-sm-2 control-label"
											style="margin-top: 20px;">预览</label>
										<div class="row aaaa3" style="position: relative; left: 0px;">

										</div>
										<div style="height: 200px"></div>
									</div>
								</div>

								<tr>
									<td></td>
									<td></td>
									<td><input type="submit" onclick="return fun()"></td>
									<td></td>
									<td></td>
								</tr>
							</table>
						</form>
					</div>
				</div>
			</li>

		</ul>


	</section>

</body>
<script type="text/javascript">
	document.getElementById("s_fatherType").onchange = new Function(
			"changeS_childType()");
</script>
</html>